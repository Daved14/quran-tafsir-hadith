<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</title>
    
    <!-- ===== PWA Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª ===== -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#d4af37">
    
    <!-- ===== iOS Safari Ø§Ù„Ù…ÙØ­Ø³ÙÙ‘Ù† ===== -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- ===== Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª iOS ===== -->
    <link rel="apple-touch-icon" href="icons/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="icons/icon-167x167.png">
    
    <!-- ===== Splash Screens Ù„Ù€ iOS ===== -->
    <!-- iPhone X / XS / 11 Pro -->
    <link rel="apple-touch-startup-image" 
          href="splash/splash-1125x2436.png"
          media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)">
    
    <!-- iPhone XR / 11 -->
    <link rel="apple-touch-startup-image" 
          href="splash/splash-828x1792.png"
          media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)">
    
    <!-- iPhone 12/13/14 -->
    <link rel="apple-touch-startup-image" 
          href="splash/splash-1170x2532.png"
          media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3)">
    
    <!-- iPhone 12/13/14 Pro Max -->
    <link rel="apple-touch-startup-image" 
          href="splash/splash-1284x2778.png"
          media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3)">
    
    <!-- iPhone 14 Pro -->
    <link rel="apple-touch-startup-image" 
          href="splash/splash-1179x2556.png"
          media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3)">
    
    <!-- iPhone 14 Pro Max -->
    <link rel="apple-touch-startup-image" 
          href="splash/splash-1290x2796.png"
          media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3)">
    
    <!-- ===== Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ===== -->
    <meta name="application-name" content="Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…">
    <meta name="description" content="ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø³Ù„Ø§Ù…ÙŠ Ø´Ø§Ù…Ù„ - Ø§Ù„Ù…ØµØ­Ù Ø§Ù„Ø´Ø±ÙŠÙØŒ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©ØŒ Ø§Ù„Ø£Ø°Ø§Ù†">
    <meta name="author" content="Your Name">
    
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… ÙÙˆØ±Ø§Ù‹ -->
    <script>
        (function() {
            var theme = localStorage.getItem('appTheme') || 'dark';
            document.documentElement.setAttribute('data-theme', theme);
        })();
    </script>
    
    <style>
        /* ========== Ù‚Ø³Ù… Ø§Ù„Ø£Ù„ÙˆØ§Ù† ========== */
        .color-options {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            padding: 16px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
        }
        
        .color-option {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border: 3px solid transparent;
            box-shadow: 0 2px 8px var(--shadow);
        }
        
        .color-option:hover {
            transform: scale(1.1);
        }
        
        .color-option:active {
            transform: scale(0.95);
        }
        
        .color-option.selected {
            border-color: var(--golden) !important;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.3);
        }
        
        .color-option.selected::after {
            content: 'âœ“';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            font-weight: bold;
        }
        
        /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª */
        .color-light {
            background: linear-gradient(135deg, #ffffff 0%, #e8e8e8 100%);
            border: 2px solid #cccccc !important;
        }
        .color-light.selected::after { color: #333333; }
        
        .color-blue {
            background: linear-gradient(135deg, #e3f2fd 0%, #90caf9 100%);
        }
        .color-blue.selected::after { color: #1565c0; }
        
        .color-green {
            background: linear-gradient(135deg, #e8f5e9 0%, #a5d6a7 100%);
        }
        .color-green.selected::after { color: #2e7d32; }
        
        .color-brown {
            background: linear-gradient(135deg, #efebe9 0%, #bcaaa4 100%);
        }
        .color-brown.selected::after { color: #5d4037; }
        
        .color-pink {
            background: linear-gradient(135deg, #fce4ec 0%, #f48fb1 100%);
        }
        .color-pink.selected::after { color: #c2185b; }
        
        .color-dark {
            background: linear-gradient(135deg, #2d2d3a 0%, #1a1a24 100%);
            border: 2px solid #d4af37 !important;
        }
        .color-dark.selected::after { color: #ffffff; }

        /* Ø£Ù†Ù…Ø§Ø· Ø¥Ø¶Ø§ÙÙŠØ© */
        .settings-item-link {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 14px 16px;
            transition: all 0.3s;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            margin-bottom: 10px;
        }
        
        .settings-item-link:hover {
            background: var(--hover-bg);
            border-color: var(--golden);
        }
        
        .settings-item-content {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .settings-item-icon-wrapper {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--golden-light);
            border-radius: 10px;
        }
        
        .settings-item-icon-wrapper svg {
            width: 20px;
            height: 20px;
            color: var(--golden);
        }
        
        .settings-item-info {
            flex: 1;
        }
        
        .settings-item-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }
        
        .settings-item-desc {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 2px;
        }
        
        .settings-item-arrow {
            display: flex;
            align-items: center;
            color: var(--text-muted);
        }
        
        .settings-item-arrow svg {
            width: 20px;
            height: 20px;
        }
    </style>

    <style>


        /* ========== Ù‚Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ========== */

        /* Ø¥Ø·Ø§Ø± Ø¨Ø³ÙŠØ· Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© */
        .share-frame {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 16px;
            margin: 20px 0;
        }

        .share-section {
            margin-top: 20px;
        }

        .share-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
        }

        .share-info {
            flex: 1;
        }

        .share-title {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            font-weight: 600;
            margin: 0 0 5px 0;
        }

        .share-title-icon {
            font-size: 1.2rem;
        }

        .share-desc {
            color: var(--text-muted);
            font-size: 0.8rem;
            margin: 0;
            line-height: 1.4;
        }

        .share-buttons {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .share-btn {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            border: 1.5px solid var(--border-color);
            background: var(--hover-bg);
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            padding: 0;
        }

        .share-btn svg {
            width: 20px;
            height: 20px;
        }

        .share-btn:hover {
            transform: scale(1.1);
            border-color: var(--golden);
        }

        .share-btn:active {
            transform: scale(0.95);
        }

        .share-native {
            border-color: var(--golden);
            background: var(--golden-light);
            color: var(--golden);
        }

        .share-native:hover {
            background: var(--golden);
            color: var(--bg-primary);
        }

        .share-facebook {
            border-color: #1877f2;
            background: rgba(24, 119, 242, 0.1);
            color: #1877f2;
        }

        .share-facebook:hover {
            background: #1877f2;
            color: #fff;
        }

        .share-x {
            border-color: var(--text-primary);
            background: rgba(0, 0, 0, 0.1);
            color: var(--text-primary);
        }

        .share-x:hover {
            background: var(--text-primary);
            color: var(--bg-primary);
        }

        html[data-theme="light"] .share-x {
            border-color: #000;
            background: rgba(0, 0, 0, 0.05);
            color: #000;
        }

        html[data-theme="light"] .share-x:hover {
            background: #000;
            color: #fff;
        }

        .share-toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            background: var(--success, #27ae60);
            color: #fff;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 0.95rem;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            font-family: inherit;
        }

        .share-toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        @media (max-width: 400px) {
            .share-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .share-buttons {
                width: 100%;
                justify-content: flex-start;
            }
            
            .share-btn {
                width: 40px;
                height: 40px;
            }
            
            .share-btn svg {
                width: 18px;
                height: 18px;
            }
        }
        </style>
</head>
<body>
    <div class="settings-container">
        
        <!-- Header -->
        <header class="page-header">
            <div class="header-right">
                <a href="tools.html" class="back-btn">
                    <i data-lucide="chevron-right"></i>
                </a>
                <h1>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h1>
            </div>
        </header>
        
        <!-- Settings Content -->
        <main class="settings-content">
            
            <!-- ========== Ù‚Ø³Ù… Ø§Ù„Ù„ÙˆÙ† ========== -->
            <section class="settings-section">
                <h2 class="section-label">Ø§Ù„Ù„ÙˆÙ†</h2>
                
                <div class="color-options" id="colorOptions">
                    <div class="color-option color-light" data-theme="light" title="ÙØ§ØªØ­"></div>
                    <div class="color-option color-blue" data-theme="blue" title="Ø£Ø²Ø±Ù‚"></div>
                    <div class="color-option color-green" data-theme="green" title="Ø£Ø®Ø¶Ø±"></div>
                    <div class="color-option color-brown" data-theme="brown" title="Ø¨Ù†ÙŠ"></div>
                    <div class="color-option color-pink" data-theme="pink" title="ÙˆØ±Ø¯ÙŠ"></div>
                    <div class="color-option color-dark" data-theme="dark" title="Ø¯Ø§ÙƒÙ†"></div>
                </div>
                
                <p class="settings-hint">Ø§Ø®ØªØ± Ù„ÙˆÙ† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙØ¶Ù„ Ù„Ø¯ÙŠÙƒ</p>
            </section>

            <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù‚Ø¨Ù„Ø© - Ø¶Ø¹Ù‡Ø§ ÙÙˆÙ‚ "Ø§Ù„Ù…ÙˆÙ‚Ø¹" ÙˆØ£Ø³ÙÙ„ "Ù„ÙˆÙ†" -->
            <div class="settings-item" onclick="location.href='qibla.html'">
                <div class="item-icon">ğŸ§­</div>
                <div class="item-info">
                    <span class="item-title">Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù‚Ø¨Ù„Ø©</span>
                    <span class="item-desc">ØªØ­Ø¯ÙŠØ¯ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù‚Ø¨Ù„Ø© Ù…Ù† Ù…ÙˆÙ‚Ø¹Ùƒ</span>
                </div>
                <span class="item-arrow">â€º</span>
            </div>
            
            <!-- ========== Ù‚Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ ========== -->
            <section class="settings-section">
                <h2 class="section-label">Ø§Ù„Ù…ÙˆÙ‚Ø¹</h2>
                
                <a href="location-picker.html" class="settings-item-link">
                    <div class="settings-item-content">
                        <div class="settings-item-icon-wrapper">
                            <i data-lucide="map-pin"></i>
                        </div>
                        <div class="settings-item-info">
                            <span class="settings-item-title">ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</span>
                            <span class="settings-item-desc">Ø§Ø®ØªØ± Ù…ÙˆÙ‚Ø¹Ùƒ Ù„Ø­Ø³Ø§Ø¨ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©</span>
                        </div>
                    </div>
                    <div class="settings-item-arrow">
                        <i data-lucide="chevron-left"></i>
                    </div>
                </a>
            </section>
            
            <!-- ========== Ù‚Ø³Ù… Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ ========== -->
            <section class="settings-section">
                <h2 class="section-label">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</h2>
                
                <div class="settings-item">
                    <span class="settings-item-text">Ø·Ø±ÙŠÙ‚Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª</span>
                    <select id="calculationMethod" class="settings-select">
                        <option value="4">Ø£Ù… Ø§Ù„Ù‚Ø±Ù‰ (Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©)</option>
                        <option value="5">Ø§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„Ù…ØµØ±ÙŠØ©</option>
                        <option value="3">Ø±Ø§Ø¨Ø·Ø© Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ</option>
                        <option value="2">Ø£Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ© (ISNA)</option>
                        <option value="1">Ø¬Ø§Ù…Ø¹Ø© ÙƒØ±Ø§ØªØ´ÙŠ</option>
                    </select>
                </div>
            </section>
            
            <!-- ========== Ù‚Ø³Ù… Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© ========== -->
            <section class="settings-section">
                <h2 class="section-label">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
                
                <a href="sync.html" class="settings-item-link">
                    <div class="settings-item-content">
                        <div class="settings-item-icon-wrapper">
                            <i data-lucide="refresh-cw"></i>
                        </div>
                        <div class="settings-item-info">
                            <span class="settings-item-title">Ù…Ø²Ø§Ù…Ù†Ø©</span>
                            <span class="settings-item-desc">Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
                        </div>
                    </div>
                    <div class="settings-item-arrow">
                        <i data-lucide="chevron-left"></i>
                    </div>
                </a>
            </section>
            
            <!-- ========== Ù‚Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸ ========== -->
            <section class="settings-section">
                <h2 class="section-label">Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸</h2>
                
                <div class="saved-location-card">
                    <div class="location-icon-wrapper">
                        <i data-lucide="map-pin"></i>
                    </div>
                    <div class="location-details">
                        <h4 id="savedCity">ØºÙŠØ± Ù…Ø­Ø¯Ø¯</h4>
                        <p id="savedCoords">--</p>
                    </div>
                </div>
            </section>
            
            <!-- ========== Ù‚Ø³Ù… Ø­ÙˆÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ========== -->
            <section class="settings-section">
                <h2 class="section-label">Ø­ÙˆÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h2>
                
                <div class="app-info-card">
                    <div class="app-info-row">
                        <span class="app-info-label">Ø§Ù„Ø¥ØµØ¯Ø§Ø±</span>
                        <span class="app-info-value">1.0.0</span>
                    </div>
                </div>
            </section>

            <!-- ========== Ù‚Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ========== -->
            <div class="settings-card share-section">
                <div class="share-frame">   
                <div class="share-content">
                    <div class="share-info">
                        <h3 class="share-title">
                            <span class="share-title-icon">ğŸ“¤</span>
                            Ù…Ø´Ø§Ø±ÙƒØ©
                        </h3>
                        <p class="share-desc">Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¹ Ø§Ù„Ø£Ù‡Ù„ Ø£Ùˆ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</p>
                    </div>
                    <div class="share-buttons">
                        <button class="share-btn share-native" onclick="shareApp('native')" title="Ù…Ø´Ø§Ø±ÙƒØ©">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
                                <polyline points="16 6 12 2 8 6"/>
                                <line x1="12" y1="2" x2="12" y2="15"/>
                            </svg>
                        </button>
                        <button class="share-btn share-facebook" onclick="shareApp('facebook')" title="ÙÙŠØ³Ø¨ÙˆÙƒ">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </button>
                        <button class="share-btn share-x" onclick="shareApp('x')" title="X (ØªÙˆÙŠØªØ±)">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </button>
                        </div>
                    </div>
                </div>
            </div>
            
        </main>
        
    </div>
    
    <script>
        // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª
        lucide.createIcons();
        
        // ========== Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù„ÙˆØ§Ù† ==========
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù…Ø­ÙÙˆØ¸ ÙˆØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø±Ø¨Ø¹
        function loadSavedTheme() {
            var savedTheme = localStorage.getItem('appTheme') || 'dark';
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„ÙƒÙ„
            document.querySelectorAll('.color-option').forEach(function(opt) {
                opt.classList.remove('selected');
            });
            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„ØµØ­ÙŠØ­
            var selectedOption = document.querySelector('[data-theme="' + savedTheme + '"]');
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }
        }
        
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø«ÙŠÙ…
        function applyTheme(theme) {
            // ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ HTML
            document.documentElement.setAttribute('data-theme', theme);
            
            // Ø­ÙØ¸ ÙÙŠ localStorage
            localStorage.setItem('appTheme', theme);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ­Ø¯ÙŠØ¯
            document.querySelectorAll('.color-option').forEach(function(opt) {
                opt.classList.remove('selected');
            });
            
            var selectedOption = document.querySelector('[data-theme="' + theme + '"]');
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }
            
            console.log('âœ… ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù„ÙˆÙ† Ø¥Ù„Ù‰:', theme);
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù†
        document.querySelectorAll('.color-option').forEach(function(option) {
            option.addEventListener('click', function() {
                var theme = this.getAttribute('data-theme');
                applyTheme(theme);
            });
        });
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        loadSavedTheme();
        
        // ========== Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ==========
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸
        var savedLocation = localStorage.getItem('userLocation');
        if (savedLocation) {
            var loc = JSON.parse(savedLocation);
            document.getElementById('savedCity').textContent = 
                (loc.city || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ') + (loc.country ? ' - ' + loc.country : '');
            document.getElementById('savedCoords').textContent = 
                loc.lat.toFixed(4) + ', ' + loc.lng.toFixed(4);
        }
        
        // Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨
        var methodSelect = document.getElementById('calculationMethod');
        var savedMethod = localStorage.getItem('calculationMethod');
        if (savedMethod) methodSelect.value = savedMethod;
        
        methodSelect.addEventListener('change', function(e) {
            localStorage.setItem('calculationMethod', e.target.value);
        });

    </script>

    <script>
        const APP_URL = window.location.origin;
        const APP_TITLE = 'ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…';
        const APP_DESCRIPTION = 'ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø³Ù„Ø§Ù…ÙŠ Ø´Ø§Ù…Ù„ - Ø§Ù„Ù…ØµØ­Ù Ø§Ù„Ø´Ø±ÙŠÙØŒ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©ØŒ Ø§Ù„Ø£Ø°Ø§Ù†ØŒ ÙˆØ§Ù„Ù…Ø²ÙŠØ¯';

        function shareApp(platform) {
            const shareData = {
                title: APP_TITLE,
                text: APP_DESCRIPTION,
                url: APP_URL
            };

            switch(platform) {
                case 'native':
                    if (navigator.share) {
                        navigator.share(shareData)
                            .then(() => showShareToast('ØªÙ…Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­ âœ“'))
                            .catch(err => {
                                if (err.name !== 'AbortError') {
                                    copyToClipboard(APP_URL);
                                }
                            });
                    } else {
                        copyToClipboard(APP_URL);
                    }
                    break;

                case 'facebook':
                    const fbUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(APP_URL)}`;
                    openShareWindow(fbUrl, 'facebook');
                    break;

                case 'x':
                    const xUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(APP_URL)}&text=${encodeURIComponent(APP_DESCRIPTION)}`;
                    openShareWindow(xUrl, 'x');
                    break;
            }
            
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }
        }

        function openShareWindow(url, platform) {
            const width = 600;
            const height = 400;
            const left = (screen.width - width) / 2;
            const top = (screen.height - height) / 2;
            
            window.open(
                url,
                `share_${platform}`,
                `width=${width},height=${height},left=${left},top=${top},toolbar=no,menubar=no,scrollbars=yes`
            );
        }

        function copyToClipboard(text) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text)
                    .then(() => showShareToast('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· âœ“'))
                    .catch(() => fallbackCopy(text));
            } else {
                fallbackCopy(text);
            }
        }

        function fallbackCopy(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            textarea.select();
            
            try {
                document.execCommand('copy');
                showShareToast('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· âœ“');
            } catch(err) {
                showShareToast('ØªØ¹Ø°Ø± Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·');
            }
            
            document.body.removeChild(textarea);
        }

        function showShareToast(message) {
            if (typeof showToast === 'function') {
                showToast(message);
                return;
            }
            
            let toast = document.getElementById('share-toast');
            if (!toast) {
                toast = document.createElement('div');
                toast.id = 'share-toast';
                toast.className = 'share-toast';
                document.body.appendChild(toast);
            }
            
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2500);
        }
    </script>
</body>
</html>